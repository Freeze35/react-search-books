{"ast":null,"code":"import React from'react';import{Row}from\"react-bootstrap\";import{fetchAddingBooks}from\"../../../api/fetchingApi\";import Loader from\"../../loader/Loader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoadMore=function LoadMore(_ref){var checkTotalItems=_ref.checkTotalItems,booksStore=_ref.booksStore,hidden=_ref.hidden,className=_ref.className;var totalItemsBook=booksStore.books.totalItems;var startIndexFetchApi=booksStore.startIndexFetchApi;//axios request\nvar chunkRequest15=function chunkRequest15(){return fetchAddingBooks(booksStore.searchQuery,booksStore,booksStore.optionRelevance,booksStore.subjectCategory,\"15\",startIndexFetchApi);};//Load by 15 books request 2 time = 30 books in full request\n//it's this will speed up the rendering of elements but Google API limit 1000 per day\nvar loadMoreBooks=function loadMoreBooks(){chunkRequest15().then(function(){chunkRequest15().then(function(){hidden=false;});});};//text number of unloaded books\nvar unloaded=Number(totalItemsBook)-Number(startIndexFetchApi);return/*#__PURE__*/_jsx(\"div\",{children:checkTotalItems?/*#__PURE__*/_jsxs(Row,{className:\"load_more_button \".concat(className),onClick:function onClick(){return loadMoreBooks();},children:[booksStore.isLoading?/*#__PURE__*/_jsx(Loader,{visible:true}):\"\",/*#__PURE__*/_jsxs(\"p\",{hidden:hidden,className:\"load_more_text\",children:[\"Load more books\",/*#__PURE__*/_jsx(\"br\",{}),unloaded>=0?\"Remaining unloaded books: \\n                            \".concat(Number(totalItemsBook)-Number(startIndexFetchApi)):\"No more books\"]})]}):\"\"});};export default LoadMore;","map":{"version":3,"names":["React","Row","fetchAddingBooks","Loader","jsx","_jsx","jsxs","_jsxs","LoadMore","_ref","checkTotalItems","booksStore","hidden","className","totalItemsBook","books","totalItems","startIndexFetchApi","chunkRequest15","searchQuery","optionRelevance","subjectCategory","loadMoreBooks","then","unloaded","Number","children","concat","onClick","isLoading","visible"],"sources":["D:/T/online-store/search-for-books/client/src/components/booksComponent/BooksList/LoadMore.tsx"],"sourcesContent":["import React from 'react';\r\nimport {Row} from \"react-bootstrap\";\r\nimport BooksStore from \"../../../store/BooksStore\";\r\nimport {fetchAddingBooks} from \"../../../api/fetchingApi\";\r\nimport Loader from \"../../loader/Loader\";\r\n\r\ninterface LoadMoreInterface {\r\n    checkTotalItems: boolean\r\n    booksStore: BooksStore\r\n    hidden: boolean\r\n    className?: string\r\n}\r\n\r\nconst LoadMore: React.FC<LoadMoreInterface> = ({checkTotalItems, booksStore, hidden, className}) => {\r\n\r\n    const totalItemsBook = booksStore.books.totalItems\r\n    const startIndexFetchApi = booksStore.startIndexFetchApi\r\n    //axios request\r\n    const chunkRequest15 = (): Promise<any> => {\r\n        return fetchAddingBooks(booksStore.searchQuery, booksStore,\r\n            booksStore.optionRelevance, booksStore.subjectCategory, \"15\", startIndexFetchApi)\r\n    }\r\n    //Load by 15 books request 2 time = 30 books in full request\r\n    //it's this will speed up the rendering of elements but Google API limit 1000 per day\r\n    const loadMoreBooks = () => {\r\n        chunkRequest15().then(() => {\r\n            chunkRequest15().then(() => {\r\n                hidden = false\r\n            })\r\n        })\r\n\r\n    }\r\n    //text number of unloaded books\r\n    let unloaded = Number(totalItemsBook) - Number(startIndexFetchApi)\r\n\r\n    return (\r\n        <div>\r\n            {checkTotalItems ?\r\n                <Row className={`load_more_button ${className}`} onClick={() => loadMoreBooks()}>\r\n                    {booksStore.isLoading\r\n                        ? <Loader visible={true}/>\r\n                        : \"\"}\r\n                    <p hidden={hidden} className=\"load_more_text\">\r\n                        Load more books<br/>\r\n                        {\r\n                        unloaded>=0\r\n                            ? `Remaining unloaded books: \r\n                            ${Number(totalItemsBook) - Number(startIndexFetchApi)}`\r\n                            : `No more books`\r\n                        }\r\n                    </p>\r\n                </Row>\r\n                : \"\"\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoadMore;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAAQC,GAAG,KAAO,iBAAiB,CAEnC,OAAQC,gBAAgB,KAAO,0BAA0B,CACzD,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBASzC,GAAM,CAAAC,QAAqC,CAAG,QAAxC,CAAAA,QAAqCA,CAAAC,IAAA,CAAyD,IAApD,CAAAC,eAAe,CAAAD,IAAA,CAAfC,eAAe,CAAEC,UAAU,CAAAF,IAAA,CAAVE,UAAU,CAAEC,MAAM,CAAAH,IAAA,CAANG,MAAM,CAAEC,SAAS,CAAAJ,IAAA,CAATI,SAAS,CAE1F,GAAM,CAAAC,cAAc,CAAGH,UAAU,CAACI,KAAK,CAACC,UAAU,CAClD,GAAM,CAAAC,kBAAkB,CAAGN,UAAU,CAACM,kBAAkB,CACxD;AACA,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAA,CAAuB,CACvC,MAAO,CAAAhB,gBAAgB,CAACS,UAAU,CAACQ,WAAW,CAAER,UAAU,CACtDA,UAAU,CAACS,eAAe,CAAET,UAAU,CAACU,eAAe,CAAE,IAAI,CAAEJ,kBAAkB,CAAC,CACzF,CAAC,CACD;AACA;AACA,GAAM,CAAAK,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CACxBJ,cAAc,EAAE,CAACK,IAAI,CAAC,UAAM,CACxBL,cAAc,EAAE,CAACK,IAAI,CAAC,UAAM,CACxBX,MAAM,CAAG,KAAK,CAClB,CAAC,CAAC,CACN,CAAC,CAAC,CAEN,CAAC,CACD;AACA,GAAI,CAAAY,QAAQ,CAAGC,MAAM,CAACX,cAAc,CAAC,CAAGW,MAAM,CAACR,kBAAkB,CAAC,CAElE,mBACIZ,IAAA,QAAAqB,QAAA,CACKhB,eAAe,cACZH,KAAA,CAACN,GAAG,EAACY,SAAS,qBAAAc,MAAA,CAAsBd,SAAS,CAAG,CAACe,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAN,aAAa,EAAE,EAAC,CAAAI,QAAA,EAC3Ef,UAAU,CAACkB,SAAS,cACfxB,IAAA,CAACF,MAAM,EAAC2B,OAAO,CAAE,IAAK,EAAE,CACxB,EAAE,cACRvB,KAAA,MAAGK,MAAM,CAAEA,MAAO,CAACC,SAAS,CAAC,gBAAgB,CAAAa,QAAA,EAAC,iBAC3B,cAAArB,IAAA,SAAK,CAEpBmB,QAAQ,EAAE,CAAC,4DAAAG,MAAA,CAELF,MAAM,CAACX,cAAc,CAAC,CAAGW,MAAM,CAACR,kBAAkB,CAAC,iBACpC,GAErB,GACF,CACJ,EAAE,EAEN,CAEd,CAAC,CAED,cAAe,CAAAT,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}